- user = user || nil
- show_dist = show_dist || false

- if user
  #tag_cloud
    - tag_cloud user.dishes.tag_counts, %w[btn-xs btn-sm btn-md btn-lg] do |tag, css_class| 
      = link_to tag.name, tag_user_dishes_path(@user, tag.name), class: "btn btn-info #{css_class}"

- if dishes.count == 0
  %h4
    = "No dish is found."
- else
  - dishes.each do |dish|
    .col-sm-4.col-md-3.well{style: 'height: 150px; padding: 5px;'}
      %h5
        %a{href: user_dish_path(dish.user, dish)}
          = dish.name
          = render partial: 'dishes/rating_star', locals: {dish: dish}
          - if dish.dish_photos.first
            %img{src: "#{dish.dish_photos.first.image.profile.url}"}
      
        %div.col-sm-12{style: 'position:absolute; bottom:0px; padding-bottom:5px;'}
          - if dish.user == current_user
            = link_to 'Edit', edit_user_dish_path(dish.user, dish), class: 'btn btn-xs btn-success'
            = link_to 'Destroy', user_dish_path(dish.user, dish), :method => :delete, :data => { :confirm => 'Are you sure?' }, class: 'btn btn-xs btn-danger'

          - if show_dist
            - dist = dish.distance_to(lat, lon)
            - if dist
              %span.pull-right
                = "#{number_with_delimiter(dist, precision: 2)} mi"

/ if this is current user's dish index page
- if user && user == current_user
  .col-sm-12
    = link_to 'Create Dish', new_user_dish_path(user), class: 'btn btn-primary'
